<!DOCTYPE html>
<html>
<head>
<title>Waterthing Gateway</title>
<link rel="stylesheet" href="/waterthing.css">
<meta charset="utf-8">
</head>

<body>
<h1>Waterthing Gateway</h1>
<hr>
<menu>
<li><a href="/index.html">Status</a></li>
<li class="current_page"><b>Login</b></li>
<li class="logged_in_only"><a href="/admin/control.html">Steuerung</a></li>
<li class="logged_in_only"><a href="/admin/conf.html">Einstellungen</a></li>
<li class="logged_in_only"><a href="/admin/debug.html">Debug</a></li>
<li class="logged_in_only"><a href="/admin/logout.html">Log Out</a></li>
</menu>
<hr>

<div class="box" id="login_box">
<form action="/admin/login" method="POST">
<h2>Login</h2>
<label for="user">Nutzer: </label><input id="user_field" name="user"></input><br>
<label for="pass">Passwort: </label><input id="pass_field" name="pass" type="password"></input><br>
<button id="submit_btn">Ãœbermitteln</button><br>
<span id="login_msg"></span>
</div>
</form>

<!--<script>
submit_btn.onclick = function () {
	let login = {'user': user_field.value, 'pass': pass_field.value};
	fetch("/admin/login", {
		'method':'POST',
		'credentials':'same-origin',
		'body': JSON.stringify(login)
	})
	.then(r => {r.json()})
	.then(jr => {
		if (typeof jr == 'undefined') {
			login_box.style.borderColor = '#F00';
			login_msg.innerHTML = 'Response ERROR.';
		}
		if (typeof jr["success"] == 'string') {
			login_box.style.borderColor = '#0F0';
			login_msg.innerHTML = 'Login OK<br>' + jr.success;
		}
		else {
			login_box.style.borderColor = '#F00';
			login_msg.innerHTML = 'Login ERROR<br>';
			if (typeof jr["success"] == 'string') login_msg.innerHTML += jr.error;
		}
	});
}
</script>-->

</body>
</html>